"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[739],{3408:(n,r,t)=>{t.d(r,{Z:()=>i});var e=t(7722),s=t.n(e),o=t(1519),a=t.n(o)()(s());a.push([n.id,".login-form[data-v-20daec5d]{max-width:600px}.login_bg[data-v-20daec5d]{background:radial-gradient(circle at 50% 50%,#ed1c24,#ffd503)}.btn_color[data-v-20daec5d]{background:#e63546!important;color:#fff}.label_color[data-v-20daec5d]{color:#e63546}","",{version:3,sources:["webpack://./resources/js/auth/pages/otp_input.vue"],names:[],mappings:"AA2JA,6BACA,eACA,CAEA,2BAEA,6DACA,CAEA,4BAEA,4BAAA,CADA,UAEA,CAEA,8BACA,aACA",sourcesContent:['<template>\r\n  <div>\r\n    <v-app class="login_bg">\r\n      <v-main>\r\n        <v-container fill-height>\r\n          <v-layout align-center justify-center>\r\n            <v-flex class="login-form text-xs-center">\r\n              <v-card>\r\n                <v-card-text>\r\n                  <form @submit.prevent="verifyOtp()">\r\n                    <div\r\n                      class="\r\n                        d-flex\r\n                        align-items-center\r\n                        justify-content-center\r\n                        mb-3\r\n                      "\r\n                    >\r\n                      <img\r\n                        src="/all-assets/common/logo/cpb/cpfivestar.png"\r\n                        alt=""\r\n                        height="50px"\r\n                      />\r\n                      <h3 class="text-center label_color ml-4">\r\n                        Reset Password\r\n                      </h3>\r\n                    </div>\r\n                    <v-alert dense text type="success">\r\n                      An OTP has been sent to this\r\n                      <strong>{{ $route.params.number }}</strong> number\r\n                    </v-alert>\r\n\r\n                    <h5>Enter OTP</h5>\r\n                    <v-otp-input length="4" v-model="form.otp"></v-otp-input>\r\n\r\n                    <v-btn block small color="primary" type="submit"\r\n                      >Submit</v-btn\r\n                    >\r\n\r\n                    <div\r\n                      class="text-muted mt-2 text-right"\r\n                      v-if="this.countDown != 0"\r\n                    >\r\n                      Didn\'t receive OTP ?\r\n                      <span v-if="this.countDown != 0">{{ countDown }}</span>\r\n                    </div>\r\n\r\n                    <v-btn\r\n                      v-else\r\n                      block\r\n                      plain\r\n                      text\r\n                      small\r\n                      @click="resendOTP()"\r\n                      color="primary"\r\n                      class="mt-2"\r\n                    >\r\n                      Resend OTP\r\n                    </v-btn>\r\n                  </form>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-flex>\r\n          </v-layout>\r\n        </v-container>\r\n      </v-main>\r\n    </v-app>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Form from "vform";\r\nexport default {\r\n  data() {\r\n    return {\r\n      countDown: 60,\r\n      form: new Form({\r\n        otp: "",\r\n        number: "",\r\n      }),\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    verifyOtp() {\r\n      this.form.post("/verify_otp").then((response) => {\r\n        Swal.fire(\r\n          response.data.data,\r\n          response.data.msg,\r\n          response.data.status\r\n        ).then(() => {\r\n          if (response.data.status == "success") {\r\n            console.log(this.$route.params.reset_type);\r\n            // this.$router.go("/login/new-password");\r\n            this.$router.push({\r\n              name: "new_password",\r\n              params: {\r\n                owner_id: response.data.owner_id,\r\n                reset_type: this.$route.params.reset_type,\r\n                cv_code: this.$route.params.cv_code,\r\n              },\r\n            });\r\n          }\r\n          if (response.data.expire == "expired") {\r\n            this.$router.go({\r\n              name: "Login",\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n\r\n    resendOTP() {\r\n      axios\r\n        .post("/reset_pass?login=" + this.$route.params.cv_code)\r\n        .then((response) => {\r\n          Swal.fire(\r\n            response.data.data,\r\n            response.data.msg,\r\n            response.data.status\r\n          ).then(() => {\r\n            if (response.data.status == "success") {\r\n            }\r\n          });\r\n        });\r\n    },\r\n\r\n    countDownTimer() {\r\n      if (this.countDown > 0) {\r\n        setTimeout(() => {\r\n          this.countDown -= 1;\r\n          this.countDownTimer();\r\n        }, 1000);\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.countDownTimer();\r\n  },\r\n\r\n  created() {\r\n    if (!this.$route.params.number) {\r\n      this.$router.push({\r\n        name: "resetPassword",\r\n      });\r\n    } else {\r\n      this.form.number = this.$route.params.number;\r\n    }\r\n  },\r\n};\r\n<\/script>\r\n\r\n\r\n<style scoped>\r\n.login-form {\r\n  max-width: 600px;\r\n}\r\n\r\n.login_bg {\r\n  /* background: #990f02; */\r\n  background: radial-gradient(circle at 50% 50%, #ed1c24, #ffd503);\r\n}\r\n\r\n.btn_color {\r\n  color: white;\r\n  background: #e63546 !important;\r\n}\r\n\r\n.label_color {\r\n  color: #e63546;\r\n}\r\n</style>'],sourceRoot:""}]);const i=a},739:(n,r,t)=>{t.r(r),t.d(r,{default:()=>u});var e=t(5714);const s={data:function(){return{countDown:60,form:new e.ZP({otp:"",number:""})}},methods:{verifyOtp:function(){var n=this;this.form.post("/verify_otp").then((function(r){Swal.fire(r.data.data,r.data.msg,r.data.status).then((function(){"success"==r.data.status&&(console.log(n.$route.params.reset_type),n.$router.push({name:"new_password",params:{owner_id:r.data.owner_id,reset_type:n.$route.params.reset_type,cv_code:n.$route.params.cv_code}})),"expired"==r.data.expire&&n.$router.go({name:"Login"})}))}))},resendOTP:function(){axios.post("/reset_pass?login="+this.$route.params.cv_code).then((function(n){Swal.fire(n.data.data,n.data.msg,n.data.status).then((function(){n.data.status}))}))},countDownTimer:function(){var n=this;this.countDown>0&&setTimeout((function(){n.countDown-=1,n.countDownTimer()}),1e3)}},mounted:function(){this.countDownTimer()},created:function(){this.$route.params.number?this.form.number=this.$route.params.number:this.$router.push({name:"resetPassword"})}};var o=t(3379),a=t.n(o),i=t(3408),c={insert:"head",singleton:!1};a()(i.Z,c);i.Z.locals;const u=(0,t(1900).Z)(s,(function(){var n=this,r=n._self._c;return r("div",[r("v-app",{staticClass:"login_bg"},[r("v-main",[r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{staticClass:"login-form text-xs-center"},[r("v-card",[r("v-card-text",[r("form",{on:{submit:function(r){return r.preventDefault(),n.verifyOtp()}}},[r("div",{staticClass:"d-flex align-items-center justify-content-center mb-3"},[r("img",{attrs:{src:"/all-assets/common/logo/cpb/cpfivestar.png",alt:"",height:"50px"}}),n._v(" "),r("h3",{staticClass:"text-center label_color ml-4"},[n._v("\n                      Reset Password\n                    ")])]),n._v(" "),r("v-alert",{attrs:{dense:"",text:"",type:"success"}},[n._v("\n                    An OTP has been sent to this\n                    "),r("strong",[n._v(n._s(n.$route.params.number))]),n._v(" number\n                  ")]),n._v(" "),r("h5",[n._v("Enter OTP")]),n._v(" "),r("v-otp-input",{attrs:{length:"4"},model:{value:n.form.otp,callback:function(r){n.$set(n.form,"otp",r)},expression:"form.otp"}}),n._v(" "),r("v-btn",{attrs:{block:"",small:"",color:"primary",type:"submit"}},[n._v("Submit")]),n._v(" "),0!=this.countDown?r("div",{staticClass:"text-muted mt-2 text-right"},[n._v("\n                    Didn't receive OTP ?\n                    "),0!=this.countDown?r("span",[n._v(n._s(n.countDown))]):n._e()]):r("v-btn",{staticClass:"mt-2",attrs:{block:"",plain:"",text:"",small:"",color:"primary"},on:{click:function(r){return n.resendOTP()}}},[n._v("\n                    Resend OTP\n                  ")])],1)])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"20daec5d",null).exports}}]);
//# sourceMappingURL=739.js.map